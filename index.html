<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="ูุธุงู ุฅุฏุงุฑุฉ ุฏููู ูุดู ุงูุจูุฒูู - ุฅุฏุงุฑุฉ ุนููุงุก ุงูุฏูู ุจุณูููุฉ">
<title>ูุธุงู ุฅุฏุงุฑุฉ ุฏููู ูุดู ุงูุจูุฒูู</title>
<link rel="stylesheet" href="style.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script src="supabase-config.js"></script>
<script src="auth.js"></script>
</head>
<body>

<button class="logout-btn" onclick="logout()" title="ุชุณุฌูู ุงูุฎุฑูุฌ">๐ช ุชุณุฌูู ุงูุฎุฑูุฌ</button>

<header>
    <h1>๐ผ ูุธุงู ุฅุฏุงุฑุฉ ุฏููู ุฒุจุงุฆู ุงููุดู</h1>
</header>

<section class="stats">
    <div class="box">ุฅุฌูุงูู ุงูุนููุงุก: <span id="totalClients">0</span></div>
    <div class="box">ุฅุฌูุงูู ุงูุฏููู: <span id="totalDebt">0 โช</span></div>
    <div class="box">ุงููุชุจูู: <span id="totalRemaining">0 โช</span></div>
</section>

<section class="card" style="background: var(--bg-card); padding: 15px; margin: 15px auto; max-width: 600px;">
    <h2 style="font-size: 18px; margin-bottom: 15px;">๐พ ุฅุฏุงุฑุฉ ุงูุจูุงูุงุช</h2>
    <div style="display: flex; gap: 10px; flex-wrap: wrap; justify-content: center;">
        <button onclick="exportData()" class="success" style="min-width: 150px;">๐ฅ ุชุตุฏูุฑ ุงูุจูุงูุงุช</button>
        <button onclick="importData()" style="min-width: 150px;">๐ค ุงุณุชูุฑุงุฏ ุงูุจูุงูุงุช</button>
        <button onclick="createBackup()" class="success" style="min-width: 150px;">๐พ ูุณุฎ ุงุญุชูุงุทู</button>
        <button onclick="clearAllData()" class="danger" style="min-width: 150px;">๐๏ธ ุญุฐู ุงููู</button>
    </div>
    <p style="text-align: center; color: var(--text-secondary); font-size: 13px; margin-top: 15px;">
        ๐ก ูุตูุญุฉ: ูู ุจุนูู ูุณุฎุฉ ุงุญุชูุงุทูุฉ ุจุงูุชุธุงู ูุญูุงูุฉ ุจูุงูุงุชู
    </p>
    <div id="saveStatus" style="text-align: center; margin-top: 10px; font-size: 12px; color: var(--text-secondary);">
        <span id="lastSaveTime">ุฌุงุฑู ุงูุชุญููู...</span>
    </div>
    <div id="syncStatus" style="text-align: center; margin-top: 10px; font-size: 12px;">
        <span id="syncStatusText"></span>
    </div>
</section>

<section class="card">
    <h2>โ ุฅุถุงูุฉ ุนููู ุฌุฏูุฏ</h2>
    <div id="errorMessage" class="error-message hidden"></div>
    <input id="name" type="text" placeholder="ุงุณู ุงูุนููู *" required autocomplete="off">
    <input id="phone" type="text" placeholder="ุฑูู ุงููุงุชู (ุงุฎุชูุงุฑู)" autocomplete="off" pattern="[0-9]*">
    <input id="amount" type="number" placeholder="ุงููุจูุบ ุงูุฃููู *" required min="0" step="0.01">
    <button id="addBtn">โ ุฅุถุงูุฉ ุงูุนููู</button>
</section>

<h2>๐ ูุงุฆูุฉ ุงูุนููุงุก</h2>
<input type="text" id="search" placeholder="๐ ุงุจุญุซ ุนู ุนููู ุจุงูุงุณู ุฃู ุฑูู ุงููุงุชู..." autocomplete="off">

<div id="clientsList"></div>

<!-- Modal ููู ุงูุนููู -->
<div id="modal" class="modal hidden">
    <div class="modal-content">
        <span class="close" onclick="closeModal()" aria-label="ุฅุบูุงู">&times;</span>
        <h2 id="modalName"></h2>
        <div id="modalClientInfo"></div>
        <div id="modalHistory"></div>
        <div style="margin-top: 20px; display: flex; gap: 10px; justify-content: center; flex-wrap: wrap;">
            <button onclick="exportPDF()" class="success">๐ ุชุตุฏูุฑ ูุดู ุญุณุงุจ PDF</button>
            <button onclick="closeModal()">ุฅุบูุงู</button>
        </div>
    </div>
</div>

<!-- Modal ุงูุชุฃููุฏ -->
<div id="confirmModal" class="modal hidden">
    <div class="modal-content confirm-modal-content">
        <div class="confirm-icon">โ๏ธ</div>
        <h2 id="confirmTitle">ุชุฃููุฏ ุงูุนูููุฉ</h2>
        <p id="confirmMessage"></p>
        <div class="confirm-buttons">
            <button id="confirmOk" class="confirm-btn confirm-ok">โ ูุนู</button>
            <button id="confirmCancel" class="confirm-btn confirm-cancel">โ ุฅูุบุงุก</button>
        </div>
    </div>
</div>

<!-- Modal ุงูุฅุฏุฎุงู -->
<div id="inputModal" class="modal hidden">
    <div class="modal-content input-modal-content">
        <span class="close" onclick="closeInputModal()" aria-label="ุฅุบูุงู">&times;</span>
        <h2 id="inputTitle">ุฅุฏุฎุงู ุงูุจูุงูุงุช</h2>
        <p id="inputLabel"></p>
        <input type="text" id="inputValue" placeholder="ุฃุฏุฎู ุงููููุฉ..." autocomplete="off">
        <div class="input-buttons">
            <button id="inputOk" class="confirm-btn confirm-ok">โ ุชุฃููุฏ</button>
            <button id="inputCancel" class="confirm-btn confirm-cancel" onclick="closeInputModal()">โ ุฅูุบุงุก</button>
        </div>
    </div>
</div>

<!-- Modal ุงูุชูุจูู -->
<div id="alertModal" class="modal hidden">
    <div class="modal-content alert-modal-content">
        <div class="alert-icon">โน๏ธ</div>
        <h2 id="alertTitle">ุชูุจูู</h2>
        <p id="alertMessage"></p>
        <div class="alert-buttons">
            <button id="alertOk" class="confirm-btn confirm-ok">โ ููุงูู</button>
        </div>
    </div>
</div>

<script src="script.js"></script>
</body>
</html>
